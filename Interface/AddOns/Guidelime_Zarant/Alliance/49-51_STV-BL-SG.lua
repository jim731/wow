Guidelime.registerGuide([[
[N50-50STV]
[NX50-51Searing Gorge]
[GA Alliance]
[D Alliance Leveling Guide]

Take the boat to Booty Bay [OC]
Accept [QA8551 The Captain's Chest]--OnStepActivation>>BindLocation,Stormwind City
Turn in [QT2767 Rescue OOX-22/FE!]--OnStepActivation>>BindLocation,Stormwind City
Turn in [QT648 Rescue OOX-17/TN!]--OnStepActivation>>BindLocation,Stormwind City
Turn in [QT836]--OnStepActivation>>BindLocation,Stormwind City
Turn in [QA3721-][QT3721]--OnStepActivation>>BindLocation,Stormwind City
Accept [QA348 Stranglethorn Fever]--OnStepActivation>>BindLocation,Stormwind City
Turn in [QT2874 Deliver to MacKinley]--OnStepActivation>>BindLocation,Stormwind City
Turn in [QT1122 Report Back to Fizzlebub]--OnStepActivation>>BindLocation,Stormwind City
Turn in [QT580]--OnStepActivation>>BindLocation,Stormwind City
[S]Set HS to Booty Bay\\Skip this step if your HS is set to Stormwind--OnStepActivation>>BindLocation,Stormwind City

Accept [QA608 The Bloodsail Buccaneers]

Turn in [QT1122 Report Back to Fizzlebub]
Turn in [QT580]
Turn in [QT2874 Deliver to MacKinley]
Accept [QA348 Stranglethorn Fever]
Turn in [QT2767 Rescue OOX-22/FE!] 
Turn in [QT648 Rescue OOX-17/TN!]
Turn in [QT836]--HL
Turn in [QA3721-][QT3721]--OOX of your own
Accept [QA8551 The Captain's Chest]

[L23.25,71.85Stranglethorn Vale]Use eagle eye at the goblin statue and look for Mok'rash\\Kill him by running in circles around the goblin statue\\Loot and right click [QA8552 The Monogrammed Sash] \\Skip this step if you can't find him[O]
Loot the green bottles at the beach \\Accept [QA594 Message in a Bottle][O]
[QC608,2-]Kill Captain Keelhaul
[QC608,3-]Kill Fleet Master Firallon
[QC608,1-]Kill Captain Stillwater
Turn in [QT594 Message in a Bottle] pt.1 \\Accept [QA630 Message in a Bottle] pt.2
[QC630-]Kill King Mukla by running in circles around a big tree
Turn in [QT630 Message in a Bottle] pt.2
[QC8551-]Kill Gorlash
[G35.27,60.42Stranglethorn Vale]Do [QC348 Stranglethorn Fever]

Go back to Booty Bay \\Turn in [QT8551]
Turn in [QT8552 The Monogrammed Sash] 
Accept [QA615][O] \\Turn in [QT615][O]
Accept [QA8553] \\Turn in [QT8553]
Turn in [QT348 Stranglethorn Fever]
Turn in [QT608 The Bloodsail Buccaneers]
[O]Make sure you have 15 *Silk Cloth* in your bags before starting the next segment --BAG_UPDATE>>Collect,4306,15
[T][O]Train skills\\Train Pet skills\\ \\Retrain your pet, learn fire resistance rank 4 and shadow resistance rank 3[A Hunter]
[H]Use your HS back to SW if you used the website unstuck in the previous segment
Fly to [F Stormwind][OC]
[G52.8,65.6Stormwind City][S][OC]Set your HS to Stormwind--OnStepActivation>>BindLocation,Stormwind City
Turn in [QT1469]
Take the tram to Ironforge[OC]
Fly to [F Searing Gorge]--OnStepCompletion>>LoadNextGuide
]], "Zarant")

Guidelime.registerGuide([[
[N50-51Searing Gorge]
[NX51-51Blasted Lands]
[GA Alliance]
[D Alliance Leveling Guide]
Make sure you have 15 *Silk Cloth* on your bags before starting this segment[O]--BAG_UPDATE>>Collect,4306,15

Talk to Hansel Heavyhands\\Accept [QA7723 Curse These Fat Fingers] \\Accept [QA7724 Fiery Menace!]
Click on the wanted board\\Accept [QA7728 STOLEN: Smithing Tuyere and Lookout's Spyglass] \\Accept [QA7729 JOB OPPORTUNITY: Culling the Competition]
Accept [QA3441 Divine Retribution] 
[QC3441-]Talk to Kalaran Windblade\\Go through his whole dialogue--GOSSIP_SHOW>>SkipGossip
Turn in [QT3441 Divine Retribution] \\Accept [QA3442 The Flawless Flame]
[QC3442-][O]Make sure you prioritize Fire Elementals/Golems
[G34.08,53.99Searing Gorge][QC7728,2-]Kill Dark Iron Lookouts around the tower\\They respawn roughly every 7 minutes[O]
[G40.90,50.31,40Searing Gorge][QC7728,1-]Kill Steamsmiths around the cauldron [O]
[QC7724-]Kill Lava Spiders along the western edge of the map [O]
[QC7723-][O]Kill War Golems
Turn in [QT3442 The Flawless Flame] \\Accept [QA3443 Forging the Shaft]
Turn in [QT7723 Curse These Fat Fingers] \\Turn in [QT7724 Fiery Menace!] \\Turn in [QT7728 STOLEN: Smithing Tuyere and Lookout's Spyglass]
Accept [QA7727 Incendosaurs? Whateverosaur is More Like It] \\Accept [QA7722 What the Flux?]
[G35.27,42.61,25Searing Gorge]Jump down into the square hole just outside Thorium Point
Find the steel ramp that leads to the 2nd floor\\Pull mobs away with your pet\\[G40.44,35.73Searing Gorge][QC7722-][O]Loot the plans laying on top of the bench
Finish off [QC7729 JOB OPPORTUNITY: Culling the Competition] \\[QC3443-]Loot 8 Thorium Plated Daggers
Keep grinding dwarves until you get the Grimesilt Outhouse Key \\Accept [QA4451 The Key to Freedom]
[QC7727-]Kill Incendosaurs

Turn in [QT3443 Forging the Shaft] \\Accept [QA3452]
Do [QC3452][OC]
Turn in [QT3452]\\Skip this step if you are having trouble soloing the elite mobs
Accept [QA3453] \\Turn in [QT3453] \\Stay next to the NPC while the RP event is going \\ \\Accept [QA3454]
Click on the Torch of Retribution\\Turn in [QT3454] 
Accept [QA3462] \\Turn in [QT3462] \\Accept [QA3463]
[QC3463,4-]Set the first tower ablaze by equipping the Torch of Retribution and clicking on the brazier at the top of the tower
[QC3463,1-]Set the western tower on fire
[QC3463,2-]Set the third tower on fire

Turn in [QT4451 The Key to Freedom] \\Accept [QA4449 Caught!] 
[G50.1,54.7Searing Gorge][QC3463,3-][O]Set the fourth tower on fire
[G72.20,73.64,20Searing Gorge][O]Kill Margol the Rager\\Loot *Margol's Horn* and right click it\\Accept [QA3181 The Horn of the Beast]
Do [QT4449 Caught!]
Turn in [QT4449 Caught!]
Start the escort quest \\Accept [QA3367 Suntara Stones]
[QC3367-]Escort Dorius
Click on the singed letter on the ground\\Turn in [QT3367 Suntara Stones] pt.1\\Accept [QA3368 Suntara Stones] pt.2
[L38.9,39.0Searing Gorge]Turn in [QT3463][O] \\Accept [QA3481][O]\\ \\Open the Hoard of the Black Dragonflight and keep the Black Dragonflight Molt
[V][O][A Hunter]Buy a few extra stacks of ammo for the next segment

Turn in [QT7727 Incendosaurs? Whateverosaur is More Like It] \\Turn in [QT7729 JOB OPPORTUNITY: Culling the Competition] \\Turn in [QT7722 What the Flux?]

Fly to [F Loch Modan]
Turn in [QT3181 The Horn of the Beast] \\Accept [QA3182 Proof of Deed]
[H][OC]Hearth to Stormwind \\Skip this step if your HS is not set to Stormwind

Fly to [F Blasted Lands]--OnStepCompletion>>LoadNextGuide
]], "Zarant")

Guidelime.registerGuide([[
[N51-51Blasted Lands]
[NX51-52WPL]
[GA Alliance]
[D Alliance Leveling Guide]
Head to Blasted Lands[OC]
[A Hunter][OC][V]Make sure you buy ammo before starting this segment
Climb the tower and accept [QA2783 Petty Squabbles]
[G34.29,66.15Swamp of Sorrows]Turn in [QT2783 Petty Squabbles] \\Accept [QA2801 A Tale of Sorrow] 
[QC2801-]Go through his whole dialogue.--GOSSIP_SHOW>>SkipGossip
Turn in [QT2801 A Tale of Sorrow]
Turn in [L51.98,35.65Blasted Lands][QA3501-][O][QT3501 Everything Counts In Large Amounts][O] if you find an *Imperfect Draenethyst Fragment*
[OC]Collect the following items:\\    14 Vulture Gizzard\\    11 Basilisk Brain\\    6 Scorpok Pincer\\    6 Blasted Boar Lung\\    5 Snickerfang Jowl --BAG_UPDATE,OnStepActivation>>BlastedLandsQuests
Turn in [QA2585-][QT2585] once you have:\\3 Scorpok Pincer\\2 Vulture Gizzard\\1 Blasted Boar Lung
[OC]Collect the following items:\\    12 Vulture Gizzard\\    11 Basilisk Brain\\    3 Scorpok Pincer\\    5 Blasted Boar Lung\\    5 Snickerfang Jowl --BAG_UPDATE,OnStepActivation>>BlastedLandsQuests
Turn in [QA2583-][QT2583 A Boar's Vitality] \\Turn in [QA2581-][QT2581 Snickerfang Jowls] \\Turn in [QA2601-][QT2601 The Basilisk's Bite] \\Turn in [QA2603-][QT2603 Vulture's Vigor]
Fly to [F Redridige]
Head to Burning Steppes\\Accept [QA3823]
Get the [P Burning Steppes] FP
[L94.4,31.8Burning Steppes]Turn in [QA4022-][O][QT4022][O] if you have a *Black Dragonflight Molt* in your bags, skip this step if you don't--OnStepActivation,BAG_UPDATE>>DragonflightMolt
Do [QC3823]
Turn in [QT3823]
[H]Hearth back to Stormwind
[V][O]Withdraw the following items from your bank:\\Super Snapper FX\\Snapshot of Gammerita\\Wildkin Feather--BANKFRAME_OPENED,BAG_UPDATE>>BankW_BL51
[G44.27,73.99Stormwind City]Do the Stormwind cloth turn ins:\\[QA7791-][O][QT7791-][O]Wool \\[QA7793-][O][QT7793-][O]Silk \\[QA7794-][O][QT7794-][O]Mageweave
Take the tram to Ironforge\\[G43.22,31.57Ironforge]Do the Gnomeregan Exiles cloth turn ins:\\[QA7802-][O][QT7802-][O]Wool \\[QA7803-][O][QT7803-][O]Silk \\[QA7809-][O][QT7809-][O]Mageweave
[G43.22,31.57Ironforge]Do the Ironforge cloth turn ins:\\[QA7807-][O][QT7807-][O]Wool \\[QA7808-][O][QT7808-][O]Silk \\[QA7804-][O][QT7804-][O]Mageweave
Accept [QA5090 A Call to Arms: The Plaguelands!]\\Skip this quest if you can't find the courier[O]
Turn in [QT3182 Proof of Deed] \\Accept [QA3201 At Last!] 
Turn in [QT3368 Suntara Stones]
Accept [QA3448 Passing the Burden]
Accept [QA4512 A Little Slime Goes a Long Way]
[A Warlock][G51.1,6.6Ironforge]Accept [QA8419]
Turn in [QT3448 Passing the Burden] \\Accept [QA3449 Arcane Runes] \\Accept [QA3450 An Easy Pickup]
--[G18.1,51.6Ironforge][S]Set your HS to Ironforge
Accept [G70.9,83.6Ironforge][QA8151][A Hunter]
Turn in [QT3450 An Easy Pickup] \\Accept [QA3451 Signal for Pickup] \\Turn in [QT3451 Signal for Pickup]

Fly to [F Loch Modan][OC]
Turn in [QT3201 At Last!]
Fly to [F The Hinterlands][OC]
Turn in [QT2877] \\Turn in [QT2989]

Fly to [F Western Plaguelands]--OnStepCompletion>>LoadNextGuide
]], "Zarant")



if not Guidelime.Zarant then return end

local z = Guidelime.Zarant

function z:DragonflightMolt()
	if GetItemCount(10575) == 0 then
		self:SkipStep()
	end
end

function z:BankW_BL51()  --Super Snapper FX\\Snapshot of Gammerita\\Wildkin Feather --BANKFRAME_OPENED,BAG_UPDATE>>BankW_STV49
	--local items = {"Super Snapper FX","Snapshot of Gammerita","Wildkin Feather"}
	local items = {9328,9330,10819}
	if z.IsItemNotInBank(items) then
		z.SkipStep(self)
		return
	end
	
	z.WithdrawItems(items)
end


function z:BlastedLandsQuests() --BAG_UPDATE>>BlastedLandsQuests
--14 Vulture Gizzard\\11 Basilisk Brain\\6 Scorpok Pincer\\6 Blasted Boar Lung\\5 Snickerfang Jowl
	local step = self.guide.steps[self.stepLine]
	local name = {
		"Vulture Gizzard","Basilisk Brain","Scorpok Pincer","Blasted Boar Lung","Snickerfang Jowl"
	}
	local quests = {
		[2583] = {
			0, --gizzard
			1, --brain
			3, --lung
			2, --pincer
			0, --jowl
		},
		[2601] = {
			2,
			10,
			0,
			0,
			0,
		},
		[2585] = {
			2,
			0,
			1,
			3,
			0,
		},
		[2581] = {
			0,
			0,
			2,
			1,
			3,
		},
		[2603] = {
			10,
			0,
			0,
			0,
			2,
		}
	}
	local id = {
		8396,
		8394,
		8392,
		8393,
		8391,
	}

	local total = {
		0,
		0,
		0,
		0,
		0,
	}
	
	for quest,items in pairs(quests) do
		if not IsQuestFlaggedCompleted(quest) then
			for item,v in pairs(items) do
				total[item] = total[item] + v
			end
		end
	end
	
	local element = step.elements[#step.elements]
	local skip = true
	--element.textInactive = ""
	element.text = "Collect the following items:"
	
	for item,goal in pairs(total) do
		local itemCount = GetItemCount(id[item])
		if goal > 0 then
			if itemCount > goal then 
				itemCount = goal 
			end
			element.text = string.format("%s\n    %s: %d/%d",element.text,name[item],itemCount,goal)
		end
		if itemCount < goal then
			skip = false
		end
	end

	
	if skip then
		--element.text = ""
		z.SkipStep(self)
		return
	end

	self:UpdateStep()

end
